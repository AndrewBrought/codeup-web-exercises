<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather API</title>
    <link rel="stylesheet" href="css/weather_map.css">
</head>
<body>


<div class="class">
    <div id="current"></div>
</div>





<script src="http://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>

<script src="js/keys.js"></script>
<script>
    "use strict";

    //send a request to OpenWeatherMap OneCAll API
    //creating variables that will hold values that we want to use
    var weatherURL = 'https://api.openweathermap.org/data/2.5/onecall';

    //These are the key, value pairs that we want to be put in the query string...
    //we are separating out the long string of the querystring so that we can see clearly what we're wanting to get back from the API
    var weatherOptions = {
        lat: 29.4241,
        lon: -98.4936,
        appid: OPEN_WEATHER_APPID,
        exclude: 'minutely, hourly',
        units: 'imperial'
    };

    function parseDate(timestamp){
        return new Date(timestamp * 1000).toLocaleDateString();

    }
    // $.get('weatherURL, weatherOptions'); //will concatinate all the desired data

    $.get(weatherURL, weatherOptions).done(function(data){
        console.log(data);
        console.log(data.daily[0].temp.max);
        console.log(data.daily[1].pressure);

        // var currentImg = 'http://openweathermap.org/img/w/[data.daily[0].weather[0].icon].png';
        function weatherStatus() {
            var weather = data.current.weather[0].icon;
            switch (weather) {
                case "01d":
                    return "Sunny";
                    break;
                case "02d":
                    return "Few Clouds";
                    break;
                case "03d":
                    return "Scattered Clouds";
                    break;
                case "04d":
                    return "Broken Clouds";
                    break;
                case "09d":
                    return "Showers";
                    break;
                case "10d":
                    return "Rain";
                    break;
                case "11d":
                    return "Thunderstorms";
                    break;
                case "13d":
                    return "Snow";
                    break;
                case "50d":
                    return "Mist";
                    break;
            }
        }

        var html = '';
        //         TOP
        html +=  '<div class="day">' + '<div class="current-top">' + '<h3>' + parseDate(data.daily[0].dt) + '</h3>' +
                '<div>' + '<h3>' + data.current.temp + '°F' + '</h3>' + '</div>' +
                '<div>' + weatherStatus() + '</div>' +
                '<div class="top-right">' + '<img src="http://openweathermap.org/img/w/' + data.daily[0].weather[0].icon + '.png"' + '>' + '<h4>' + "Feels Like " + data.daily[0].feels_like.day + '°F ' + '</h4>' + '<h4>' + data.daily[0].temp.max + '°F' + "/" + data.daily[0].temp.min + '°F' + '</h4>' +'</div>' + '</div>' +

                //BOTTOM   ADD DAY/NIGHT TAGS FROM FONT AWESOME
                '<div class="current-bottom">' + '<div class="morn">' + '<h4>Morning</h4>' + '<h3>' + data.daily[0].temp.morn + '°F' + '</h3>' + '</div>' +
                '<div class="day">' + '<h4>Afternoon</h4>' + '<h4>' + data.daily[0].temp.day + '°F' + '</h4>' + '</div>' +
                '<div class="eve">' + '<h4>Evening</h4>' + '<h4>' + data.daily[0].temp.eve + '°F' + '</h4>' + '</div>' +
                '<div class="night">' + '<h4>Overnight</h4>' + '<h4>' + data.daily[0].temp.night + '°F' + '</h4>' + '</div>' + '</div>' + '</div>';

        console.log(data.daily[0].weather[0].icon);
        $('#current').append(html);



        // var todayDate = new Date(data.daily[0].dt * 1000);
        // console.log(parseDate(data.daily[0].dt));  //new Date(1589824800 * 1000).toDateString();
    });

</script>

</body>
</html>